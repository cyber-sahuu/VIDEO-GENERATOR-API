<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SAHU AI VIDEO GENERATOR</title>

<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
body{
  font-family:Outfit,sans-serif;
  background:#0f172a;
  color:#fff;
  min-height:100vh;
  display:flex;
  align-items:center;
  justify-content:center
}
.card{
  width:95%;
  max-width:500px;
  background:rgba(15,23,42,.75);
  border-radius:22px;
  padding:30px;
  border:1px solid rgba(255,255,255,.1)
}
h1{text-align:center;margin-bottom:8px}
p{text-align:center;color:#94a3b8;font-size:14px}
textarea{
  width:100%;
  height:120px;
  margin-top:20px;
  padding:15px;
  border-radius:14px;
  border:1px solid rgba(255,255,255,.15);
  background:#020617;
  color:#fff;
  font-size:15px;
  resize:none
}
button{
  width:100%;
  margin-top:18px;
  padding:15px;
  border:none;
  border-radius:14px;
  background:linear-gradient(135deg,#6366f1,#ec4899);
  color:#fff;
  font-size:16px;
  font-weight:600;
  cursor:pointer
}
.loading{
  display:none;
  margin-top:20px;
  text-align:center;
  color:#94a3b8
}
.result{
  display:none;
  margin-top:22px
}
.actions{
  display:flex;
  gap:12px
}
.actions a{
  flex:1;
  text-align:center;
  padding:14px;
  border-radius:12px;
  text-decoration:none;
  font-weight:600
}
.watch{background:rgba(255,255,255,.1);color:#fff}
.download{background:rgba(16,185,129,.2);color:#34d399}
.footer{
  text-align:center;
  margin-top:25px;
  font-size:12px;
  color:#64748b
}

/* ===== VIDEO OVERLAY PLAYER ===== */
.overlay{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.85);
  display:none;
  align-items:center;
  justify-content:center;
  z-index:999
}
.overlay video{
  width:90%;
  max-width:900px;
  border-radius:16px;
}
.close{
  position:absolute;
  top:20px;
  right:25px;
  font-size:26px;
  color:#fff;
  cursor:pointer
}
</style>
</head>
<body>

<div class="card">
  <h1>SAHU AI VIDEO GENERATOR</h1>
  <p>Prompt লিখে AI ভিডিও বানান</p>

  <textarea id="prompt" placeholder="Example: cinematic cyberpunk city at night..."></textarea>

  <button id="generateBtn">
    <i class="fa-solid fa-clapperboard"></i> Generate Video
  </button>

  <div class="loading" id="loading">
    ⏳ Generating video, please wait...
  </div>

  <div class="result" id="result">
    <p style="color:#4ade80;margin-bottom:15px;">
      <i class="fa-solid fa-circle-check"></i> Video Generated Successfully
    </p>
    <div class="actions">
      <a href="#" id="watchBtn" class="watch">
        <i class="fa-solid fa-play"></i> Watch Online
      </a>
      <a href="#" id="downloadBtn" class="download" download>
        <i class="fa-solid fa-download"></i> Download
      </a>
    </div>
  </div>

  <div class="footer">© 2025 • SHAHADAT SAHU</div>
</div>

<!-- ===== VIDEO PLAYER OVERLAY ===== -->
<div class="overlay" id="overlay">
  <i class="fa-solid fa-xmark close" id="close"></i>
  <video id="player" controls autoplay></video>
</div>

<script>
const btn=document.getElementById("generateBtn");
const prompt=document.getElementById("prompt");
const loading=document.getElementById("loading");
const result=document.getElementById("result");
const watchBtn=document.getElementById("watchBtn");
const downloadBtn=document.getElementById("downloadBtn");

const overlay=document.getElementById("overlay");
const player=document.getElementById("player");
const closeBtn=document.getElementById("close");

let currentVideo="";

btn.onclick=async()=>{
  const text=prompt.value.trim();
  if(!text) return alert("Prompt লিখুন");

  btn.style.display="none";
  result.style.display="none";
  loading.style.display="block";

  try{
    const res=await fetch("/animate?prompt="+encodeURIComponent(text));
    const data=await res.json();
    if(!data.success||!data.video) throw 0;

    currentVideo=data.video;

    loading.style.display="none";
    result.style.display="block";
    btn.style.display="block";
    btn.innerHTML='<i class="fa-solid fa-rotate"></i> Generate Again';

    downloadBtn.href=currentVideo;
  }catch{
    loading.style.display="none";
    btn.style.display="block";
    btn.innerHTML="Try Again";
    alert("❌ Video generation failed");
  }
};

watchBtn.onclick=(e)=>{
  e.preventDefault();
  player.src=currentVideo;
  overlay.style.display="flex";
};

closeBtn.onclick=()=>{
  player.pause();
  player.src="";
  overlay.style.display="none";
};
</script>

</body>
</html>
